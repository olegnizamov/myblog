---
title: Как создать блог на Github Pages
date: 2021-08-10 08:28:57
tags: ['Утилиты']
---
## Как создать блог на Github Pages

В этой статье рассказано, как просто и с нуля создать сайт и сделать его доступным по адресу sitename.github.io (бесплатный хостинг Github) и подключить к нему доменное имя.

Использовать будем [HEXO](https://hexo.io/ "").

Примерный план работы:

* Зачем этот генератор статических сайтов?
* Установка hexo на компьютер
* Настройки сайта
* Создание репозитория
* Добавляем код в репозиторий
* Настраиваем репозитория для публикации
* Добавляем в репозиторий CNAME
* Добавляем А-запись в DNS домена

**Зачем этот генератор статических сайтов?**

Зачем они нужны, эти генераторы? Ведь можно написать самому CSS- и html-код для каждой страницы своего сайта. Но при добавлении, например, записи в журнал каждый раз придётся переделывать страницу со списком записей, ссылки под статьёй (на следующую и предыдущую статью), добавлять новые категории и пр, вести учет тегов. А если это можно делать автоматически, зачем это делать ручками?

Пользуясь генератором, Вы создаёте обычные текстовые файлы для записей и страниц, html-кода в них нет (html-теги, разумеется, можно использовать при желании). Очень популярным форматом (но не единственным) является язык разметки Markdown. Генератор съедает ваши текстовые файлы и генерирует html-файлы, которые остаётся только выложить на сайт.

Так же вы не теряете производительность сервера (да и сервера у вас нет) на генерацию страниц. Любые бэкенд языки при наличии большого количества записей начинают "подтормаживать", а кэширование - это по сути генерация статичных данных, которые будут подгружены на сайте. И зачем нам посредник?)

**Установка hexo на компьютер**

1. Устанавливаем на компьютер [Node.js](https://nodejs.org/en/ "Считаешь себя синьором? Да кого ты обманываешь") и [Git](http://git-scm.com/ "Считаешь себя синьором? Да кого ты обманываешь")
2. Устанавливаем hexo

```code
$ npm install hexo-cli -g
$ hexo init blog
$ cd blog
$ npm install
$ hexo server
```
**Nota bene!** При установке на Windows(Мы говорим про PowerShell, не CMD) у меня возникла ошибка "Невозможно загрузить файл …, так как выполнение сценариев отключено в этой системе". Подробнее можно [почитать тут](https://zawindows.ru/%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B-%D0%BD%D0%B5%D0%B2%D0%BE%D0%B7%D0%BC%D0%BE%D0%B6%D0%BD%D0%BE-%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7/)
Как решить - для тех, кому лень читать.
Вводим:
```code
$ Get-ExecutionPolicy
```
Если получили:
```code
$ Get-Restricted
```
Тогда разрешаем выполнение файлов
```code
$ Set-ExecutionPolicy unrestricted
```

**Настройки сайта**
3. Забегаем на сайт hexo и из [большого списка шаблонов](https://hexo.io/themes/) выбираем тот, который нравится вам.
**Nota bene!** Перед глобальным выбором шаблонов и изучение их плюсов и минусов советую создать несколько страниц. Это позволит понять + и - данного шаблона.
**Nota bene!** Мой выбор остановился на [prontera](https://github.com/AngryPowman/hexo-theme-prontera) и [сайт демо](http://powman.org/)

![Дизайн шаблона как автора](/images/posts/how-to-create-blog/snapshot.png)

4. (Пропускаем, если выбираем другой шаблон) Из настроек шаблона видно, что еще установить hexo-renderer-jade и hexo-generator-feed:
```code
$ npm install hexo-renderer-jade --save
$ npm install hexo-generator-feed --save
```
5. Подключаем создание автоматической папки для ресурсов в source/_posts и имя поста. Для этого идем в файл _config.yml и меняем
```code
post_asset_folder: true
```
6. Создайте новый пост блога командой
```code
$ hexo new "имя-нового-поста"
```
7. Редактирование материала. В целом используется md разметка, но есть парочка важных элементов

* [Вставка кода](https://hexo.io/ru/docs/tag-plugins.html)
* [Вставка картинки](https://hexo.io/ru/docs/asset-folders.html)

8. Чтобы посмотреть результат работы до деплоя на github - http://localhost:4000/. Если результат устраивает - деплоим.
   ![Здесь будет описан точный адрес сайта.](/images/posts/how-to-create-blog/server.png)

**Создание репозитория**
9. Создаем репозиторий в гите с именем пользователя. В моем случае olegnizamov.github.io
![Имя проекта](/images/posts/how-to-create-blog/projectname.png)

**Добавляем код в репозиторий**
10. Для автоматического деплоя блога на GitHub установим hexo-deployer-git
```code
$ npm install hexo-deployer-git --save
```

11. и редактируем файл _config.yml
    ```code
    deploy:
    type: git
    repo: <repository url> # https://github.com/username/username.github.io
    ```
12. и отправляем изменения на блог
    ```code
    $ hexo clean && hexo deploy
    ```

**Настраиваем репозитория для публикации**
**Nota bene!** Полную информацию можно почитать тут [Managing a custom domain for your GitHub Pages site](https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-a-records-with-your-dns-provider)
13. Переходим в настройки проекта -> Страницы (Settings->Pages) указываем в поле Custom domain домен, который будет использоваться как зеркало.
![](/images/posts/how-to-create-blog/domain.png)

**Добавляем в репозиторий CNAME**
14. Если мы настраивали зеркало через github настройки, то файл CNAME на сервере создается автоматически. Однако есть проблема, при деплои он каждый раз будет затираться.Создавать данный файл ручками (мы ленивые и за автоматизацию) - плохо. Чтобы создать файл CNAME с помощью Hexo, просто создайте ~/hexo/source/CNAME с необходимым содержанием.
При выполнении hexo deploy этот файл будет обновляться на Github Pages.
![](/images/posts/how-to-create-blog/cname1.png)
![](/images/posts/how-to-create-blog/cname2.png)

**Добавляем А-запись в DNS домена**
15. Ну и не забываем, добавить данные А записи к домену, чтобы все корректно настроилось.
```code
185.199.108.153
185.199.109.153
185.199.110.153
185.199.111.153
```
![](/images/posts/how-to-create-blog/atype.gif)